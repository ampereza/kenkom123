{% extends 'accounts/accounts_base.html' %}

{% block content %}
<div class="container-fluid px-4">
    
    <h1 class="mt-4">Financial Dashboard</h1>
    <h1 style="text-align: right; color: blue;">Balance B/D {{balance}}</h1>
    
    <!-- Summary Cards -->
    <div class="row mt-4">
        <!-- balance brought down and balance brought fotward -->
       
        <!-- Daily Totals -->
        <div class="col-xl-3 col-md-6">
            <div class="card bg-primary text-white mb-4">
                <div class="card-header">Daily Totals</div>
                <div class="card-body">
                    <p>Sales: UGX: {{ daily_sales | float | round(2) }}</p>
                    
                    <p>Expenses: UGX: {{ daily_expenses | float | round(2) }}</p>
                    <p>Purchases: UGX: {{ daily_purchases | float | round(2) }}</p>
                    <p>Receipts: UGX: {{ daily_receipts | float | round(2) }}</p>
                </div>
            </div>
        </div>

        <!-- Weekly Totals -->
        <div class="col-xl-3 col-md-6">
            <div class="card bg-success text-white mb-4">
                <div class="card-header">Weekly Totals</div>
                <div class="card-body">
                    <p>Sales: UGX: {{ weekly_sales | float | round(2) }}</p>
                    <p>Expenses: UGX: {{ weekly_expenses | float | round(2) }}</p>
                    <p>Purchases: UGX: {{ weekly_purchases | float | round(2) }}</p>
                    <p>Receipts: UGX: {{ weekly_receipts | float | round(2) }}</p>

                </div>
            </div>
        </div>

        <!-- Monthly Totals -->
        <div class="col-xl-3 col-md-6">
            <div class="card bg-warning text-dark mb-4">
                <div class="card-header">Monthly Totals</div>
                <div class="card-body">
                    <p>Sales: UGX: {{ monthly_sales | float | round(2) }}</p>
                    <p>Expenses: UGX: {{ monthly_expenses | float | round(2) }}</p>
                    <p>Purchases: UGX: {{ monthly_purchases | float | round(2) }}</p>
                    <p>Receipts: UGX: {{ monthly_receipts | float | round(2) }}</p>
                </div>
            </div>
        </div>

        <!-- Annual Totals -->
        <div class="col-xl-3 col-md-6">
            <div class="card bg-info text-white mb-4">
                <div class="card-header">Annual Totals</div>
                <div class="card-body">
                    <p>Sales: UGX: {{ annual_sales | float | round(2) }}</p>
                    <p>Expenses: UGX: {{ annual_expenses | float | round(2) }}</p>
                    <p>Purchases: UGX: {{ annual_purchases | float | round(2) }}</p>
                    <p>Receipts: UGX: {{ annual_receipts | float | round(2) }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activities -->
    <div class="row">
        <!-- Recent Sales -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    Recent Sales
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for sale in recent_sales %}
                            <tr>
                                <td>{{ sale.created_at[:10] }}</td>
                                <td>{{ sale.description }}</td>
                                <td>UGX: {{ sale.total_amount | float | round(2) }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Recent receipt -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-receipt me-1"></i>
                    Recent Receipts
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for receipt in recent_receipts %}
                            <tr>
                                <td>{{ receipt.date[:10] }}</td>
                                <td>{{ receipt.description }}</td>
                                <td>UGX: {{ receipt.amount | float | round(2) }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Recent Expenses -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    Recent Expenses
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for expense in recent_expenses %}
                            <tr>
                                <td>{{ expense.date[:10] }}</td>
                                <td>{{ expense.description }}</td>

                                <td>UGX: {{ expense.amount | float | round(2) }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Invoices and Payment Vouchers -->
    <div class="row">
        <!-- Recent Invoices -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-file-invoice me-1"></i>
                    Recent Invoices
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for invoice in recent_invoices %}
                            <tr>
                                <td>{{ invoice.created_at[:10] }}</td>
                                <td>{{ invoice.description }}</td>
                                <td>UGX: {{ invoice.total_amount | float | round(2) }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Recent Payment Vouchers -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-receipt me-1"></i>
                    Recent Payment Vouchers
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for voucher in recent_payment_vouchers %}
                            <tr>
                                <td>{{ voucher.date[:10] }}</td>
                                <td>{{ voucher.description }}</td>
                                <td>UGX: {{ voucher.total_amount | float | round(2) }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
